<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph &mdash; Intel® Neural Compressor 2.0 documentation</title>
      <link rel="stylesheet" href="../../../../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../../../../" id="documentation_options" src="../../../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../../../_static/doctools.js"></script>
        <script src="../../../../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../../index.html" class="icon icon-home">
            Intel® Neural Compressor
          </a>
            <div class="version">
              <a href="../../../../../../../../versions.html">latest▼</a>
              <p>Click link above to switch version</p>
            </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/source/get_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/source/installation_guide.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/source/user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/source/examples_readme.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/source/api-doc/apis.html">APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/source/releases_info.html">Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/source/legal_information.html">Legal Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/source/SECURITY.html">Security Policy</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/intel/neural-compressor">Repo</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../index.html">Intel® Neural Compressor</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><code class="xref py py-mod docutils literal notranslate"><span class="pre">neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph</span></code></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../../_sources/autoapi/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph">
<span id="neural-compressor-adaptor-tf-utils-graph-rewriter-onnx-onnx-graph"></span><h1><a class="reference internal" href="#module-neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph" title="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph"><code class="xref py py-mod docutils literal notranslate"><span class="pre">neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph</span></code></a><a class="headerlink" href="#module-neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph" title="Permalink to this heading"></a></h1>
<p>ONNX Graph wrapper for Tensorflow model converting to ONNX model.</p>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this heading"></a></h2>
<section id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this heading"></a></h3>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph" title="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OnnxGraph</span></code></a></p></td>
<td><p>Class that provides graph manipulation and matching.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.</span></span><span class="sig-name descname"><span class="pre">OnnxGraph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_shapes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtypes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra_opset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_subgraph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph" title="Permalink to this definition"></a></dt>
<dd><p>Class that provides graph manipulation and matching.</p>
<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.is_target">
<span class="sig-name descname"><span class="pre">is_target</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">names</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.is_target" title="Permalink to this definition"></a></dt>
<dd><p>Return True if target platform contains any name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.make_const">
<span class="sig-name descname"><span class="pre">make_const</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">np_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_conversion</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.make_const" title="Permalink to this definition"></a></dt>
<dd><p>Make a new constant node in the graph.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – const node name, must be unique.</p></li>
<li><p><strong>np_val</strong> – value of type numpy ndarray.</p></li>
<li><p><strong>skip_conversion</strong> – bool, indicate whether this created node would be mapped during conversion.</p></li>
<li><p><strong>raw</strong> – whether to store data at field of raw_data or the specific field according to its dtype</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.make_node">
<span class="sig-name descname"><span class="pre">make_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">op_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_conversion</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op_name_scope</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtypes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">utils.ONNX_DOMAIN</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">infer_shape_dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branches</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.make_node" title="Permalink to this definition"></a></dt>
<dd><p>Make a new onnx node in the graph.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.append_node">
<span class="sig-name descname"><span class="pre">append_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.append_node" title="Permalink to this definition"></a></dt>
<dd><p>Add a node to the graph.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.remove_node">
<span class="sig-name descname"><span class="pre">remove_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.remove_node" title="Permalink to this definition"></a></dt>
<dd><p>Remove node in current graph.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.safe_remove_nodes">
<span class="sig-name descname"><span class="pre">safe_remove_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">to_delete</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.safe_remove_nodes" title="Permalink to this definition"></a></dt>
<dd><p>Delete nodes in <cite>to_delete</cite> without third-party node consuming it.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.reset_nodes">
<span class="sig-name descname"><span class="pre">reset_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ops</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.reset_nodes" title="Permalink to this definition"></a></dt>
<dd><p>Reset the graph with node list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.create_new_graph_with_same_config">
<span class="sig-name descname"><span class="pre">create_new_graph_with_same_config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.create_new_graph_with_same_config" title="Permalink to this definition"></a></dt>
<dd><p>Create a clean graph inheriting current graph’s configuration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.is_empty_input">
<span class="sig-name descname"><span class="pre">is_empty_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.is_empty_input" title="Permalink to this definition"></a></dt>
<dd><p>Check if the input is empty.</p>
<p>in ONNX, operation may have optional input and an empty string may be used
in the place of an actual argument’s name to indicate a missing argument.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.update_node_shape_dtype">
<span class="sig-name descname"><span class="pre">update_node_shape_dtype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.update_node_shape_dtype" title="Permalink to this definition"></a></dt>
<dd><p>Try the best to infer shapes and dtypes for outputs of the node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.update_proto">
<span class="sig-name descname"><span class="pre">update_proto</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.update_proto" title="Permalink to this definition"></a></dt>
<dd><p>Update the onnx protobuf from out internal Node structure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_nodes">
<span class="sig-name descname"><span class="pre">get_nodes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_nodes" title="Permalink to this definition"></a></dt>
<dd><p>Get node list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_node_by_output">
<span class="sig-name descname"><span class="pre">get_node_by_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_in_parent_graphs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_node_by_output" title="Permalink to this definition"></a></dt>
<dd><p>Get node by node output id recursively going through nested graphs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output</strong> – node’s output</p></li>
<li><p><strong>search_in_parent_graphs</strong> – search in all parent graphs</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_node_by_output_in_current_graph">
<span class="sig-name descname"><span class="pre">get_node_by_output_in_current_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_node_by_output_in_current_graph" title="Permalink to this definition"></a></dt>
<dd><p>Get node by node output id.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_node_by_name">
<span class="sig-name descname"><span class="pre">get_node_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_node_by_name" title="Permalink to this definition"></a></dt>
<dd><p>Get node by name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.set_node_by_name">
<span class="sig-name descname"><span class="pre">set_node_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.set_node_by_name" title="Permalink to this definition"></a></dt>
<dd><p>Set node by name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.is_const">
<span class="sig-name descname"><span class="pre">is_const</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.is_const" title="Permalink to this definition"></a></dt>
<dd><p>Check if the node is const.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_tensor_value">
<span class="sig-name descname"><span class="pre">get_tensor_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_tensor_value" title="Permalink to this definition"></a></dt>
<dd><p>Get the tensor value of the node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_dtype">
<span class="sig-name descname"><span class="pre">get_dtype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_dtype" title="Permalink to this definition"></a></dt>
<dd><p>Get dtype for node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.set_dtype">
<span class="sig-name descname"><span class="pre">set_dtype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.set_dtype" title="Permalink to this definition"></a></dt>
<dd><p>Set dtype for node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.copy_dtype">
<span class="sig-name descname"><span class="pre">copy_dtype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.copy_dtype" title="Permalink to this definition"></a></dt>
<dd><p>Copy dtype from another node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_shape">
<span class="sig-name descname"><span class="pre">get_shape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_shape" title="Permalink to this definition"></a></dt>
<dd><p>Get shape for node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_rank">
<span class="sig-name descname"><span class="pre">get_rank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.get_rank" title="Permalink to this definition"></a></dt>
<dd><p>Returns len(get_shape(name)) or None if shape is None.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.set_shape">
<span class="sig-name descname"><span class="pre">set_shape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.set_shape" title="Permalink to this definition"></a></dt>
<dd><p>Set new shape of node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.copy_shape">
<span class="sig-name descname"><span class="pre">copy_shape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.copy_shape" title="Permalink to this definition"></a></dt>
<dd><p>Copy shape from another node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.add_graph_output">
<span class="sig-name descname"><span class="pre">add_graph_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.add_graph_output" title="Permalink to this definition"></a></dt>
<dd><p>Add node output as graph’s output.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.topological_sort">
<span class="sig-name descname"><span class="pre">topological_sort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ops</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.topological_sort" title="Permalink to this definition"></a></dt>
<dd><p>Topological sort of graph.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.make_graph">
<span class="sig-name descname"><span class="pre">make_graph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.make_graph" title="Permalink to this definition"></a></dt>
<dd><p>Create GraphProto for onnx from internal graph.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>doc</strong> – text for doc string of the graph</p></li>
<li><p><strong>graph_name</strong> – optimize graph name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.make_model">
<span class="sig-name descname"><span class="pre">make_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">graph_doc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tfqdq_to_onnxqdq'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.make_model" title="Permalink to this definition"></a></dt>
<dd><p>Create final ModelProto for onnx from internal graph.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>graph_doc</strong> – text for doc string of the model</p></li>
<li><p><strong>graph_name</strong> – optimize graph name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.make_onnx_graph_io">
<span class="sig-name descname"><span class="pre">make_onnx_graph_io</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ids</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.make_onnx_graph_io" title="Permalink to this definition"></a></dt>
<dd><p>Create tensor_value_info for passed input/output ids.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.dump_graph">
<span class="sig-name descname"><span class="pre">dump_graph</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.dump_graph" title="Permalink to this definition"></a></dt>
<dd><p>Dump graph with shapes (helpful for debugging).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.dump_node_statistics">
<span class="sig-name descname"><span class="pre">dump_node_statistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">include_attrs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_subgraphs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.dump_node_statistics" title="Permalink to this definition"></a></dt>
<dd><p>Return a counter of op types (and optionally attribute names) within the graph.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.remove_input">
<span class="sig-name descname"><span class="pre">remove_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_be_removed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.remove_input" title="Permalink to this definition"></a></dt>
<dd><p>Remove input from Node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – the node we expect the input on</p></li>
<li><p><strong>to_be_removed</strong> – the node name we want to remove</p></li>
<li><p><strong>input_index</strong> – if not None, index of the input to be removed,
the method is more efficient if <em>input_index</em> is specified,
otherwise, it has to look for every input named <em>old_input</em>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.insert_new_node_on_input">
<span class="sig-name descname"><span class="pre">insert_new_node_on_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.insert_new_node_on_input" title="Permalink to this definition"></a></dt>
<dd><p>Create and insert a new node into the graph.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> – we want to replace the input for this node</p></li>
<li><p><strong>op_type</strong> – type for new operation</p></li>
<li><p><strong>input_name</strong> – the name(s) of the outputs above us
if scalar, new node placed above input_name
if list, new node placed above input_name[0]. list is inputs into new node</p></li>
<li><p><strong>name</strong> – the name of the new op</p></li>
<li><p><strong>kwargs</strong> – attributes of the new node</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>node that was inserted</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.add_graph_input">
<span class="sig-name descname"><span class="pre">add_graph_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.add_graph_input" title="Permalink to this definition"></a></dt>
<dd><p>Add placeholder node as graph’s input. Order matters only for subgraph.</p>
<p>Placeholders in original graph are assumed for main graph, order not matters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.insert_node_on_output">
<span class="sig-name descname"><span class="pre">insert_node_on_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.insert_node_on_output" title="Permalink to this definition"></a></dt>
<dd><p>Insert a node into the graph.</p>
<p>The inserted node takes the <em>output_name</em> as input and produces a
new output. The function goes through every node taking <em>output_name</em>
and replaces it by the new output name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.insert_new_node_on_output">
<span class="sig-name descname"><span class="pre">insert_new_node_on_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">op_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.insert_new_node_on_output" title="Permalink to this definition"></a></dt>
<dd><p>Create and insert a new node into the graph. It then calls insert_node_on_output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>op_type</strong> – type for new operation</p></li>
<li><p><strong>output_name</strong> – the names of the outputs above us</p></li>
<li><p><strong>name</strong> – the name of the new op</p></li>
<li><p><strong>kwargs</strong> – attributes of the new node</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>node that was inserted</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.find_output_consumers">
<span class="sig-name descname"><span class="pre">find_output_consumers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.find_output_consumers" title="Permalink to this definition"></a></dt>
<dd><p>Find all nodes consuming a given output.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.replace_all_inputs">
<span class="sig-name descname"><span class="pre">replace_all_inputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ops</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.replace_all_inputs" title="Permalink to this definition"></a></dt>
<dd><p>Replace all inputs pointing to old_input with new_input.</p>
<p><em>ops</em> is used if defined, otherwise <cite>_output_to_consumers</cite> is used to determine the impacted nodes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.replace_input">
<span class="sig-name descname"><span class="pre">replace_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">old_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.replace_input" title="Permalink to this definition"></a></dt>
<dd><p>Replace one input in a node.</p>
<p>The method is more efficient if <em>input_index</em> is specified.
Otherwise, it renames every output named <em>old_input</em>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.replace_inputs">
<span class="sig-name descname"><span class="pre">replace_inputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_inputs</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.replace_inputs" title="Permalink to this definition"></a></dt>
<dd><p>Replace node inputs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.extract_sub_graph_nodes">
<span class="sig-name descname"><span class="pre">extract_sub_graph_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputs_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_checker</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_unused_inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.extract_sub_graph_nodes" title="Permalink to this definition"></a></dt>
<dd><p>Return nodes of subgraph having output_ids as outputs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>outputs_name</strong> – output node name of the subgraph to find.</p></li>
<li><p><strong>input_checker</strong> – customized input check function: bool func(node).</p></li>
<li><p><strong>remove_unused_inputs</strong> – bool, indicates whether unused placeholder inputs will be removed.
in the resulting nodes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a list of nodes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.delete_unused_nodes">
<span class="sig-name descname"><span class="pre">delete_unused_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">outputs_name</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.delete_unused_nodes" title="Permalink to this definition"></a></dt>
<dd><p>Delete nodes not in subgraph ending with output_names.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.safe_to_remove_nodes">
<span class="sig-name descname"><span class="pre">safe_to_remove_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">to_delete</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.safe_to_remove_nodes" title="Permalink to this definition"></a></dt>
<dd><p>List of nodes that safe to delete, i.e. outputs not consumed by other nodes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.convert_qdq_nodes">
<span class="sig-name descname"><span class="pre">convert_qdq_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">q_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dq_node</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.convert_qdq_nodes" title="Permalink to this definition"></a></dt>
<dd><p>Convert tensorflow QuantizeV2/Dequantize nodes to QuantizeLinear/DequantizeLinear.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.delete_qdq_nodes">
<span class="sig-name descname"><span class="pre">delete_qdq_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">q_node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dq_node</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.delete_qdq_nodes" title="Permalink to this definition"></a></dt>
<dd><p>Delete tensorflow QuantizeV2/Dequantize in the onnx graph.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.optimize_conv_add_fusion">
<span class="sig-name descname"><span class="pre">optimize_conv_add_fusion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.optimize_conv_add_fusion" title="Permalink to this definition"></a></dt>
<dd><p>Fuse conv and add.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.apply_onnx_fusion">
<span class="sig-name descname"><span class="pre">apply_onnx_fusion</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/intel/neural-compressor/blob/master/neural_compressor/adaptor/tf_utils/graph_rewriter/onnx/onnx_graph.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#neural_compressor.adaptor.tf_utils.graph_rewriter.onnx.onnx_graph.OnnxGraph.apply_onnx_fusion" title="Permalink to this definition"></a></dt>
<dd><p>Optimize graph with fusion.</p>
</dd></dl>

</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Intel® Neural Compressor, Intel.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>